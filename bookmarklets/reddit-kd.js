javascript: (function() { if (document.location.href.match(/\.(jpe?g|gif|png)/)) { url = document.location.href; } else if (document.location.href.match(/imgur\.com/) && !document.location.href.match(/imgur\.com.*\..{3,4}$/i)) { url = $('.image img, .image video source, .post-image video source').first().attr('src'); url = url.replace(/^\/\//, 'http://').replace(/(webm|mp4)/i, 'gifv'); } else if (document.location.href.match(/pr0gramm\.com/)) { if ($('.item-source a').text().match('imgur')) { itemsrc = $('.item-source a').attr('href').replace(/\.(mp4|webm)/, '.gifv'); } else if ($('.item-container .item-image').attr('src').match(/\.(jpe?g|gif|png)/)) { itemsrc = $('.item-container .item-image').attr('src'); } else { itemNum = Math.round((parseFloat($('.item-container .item-pointer').css('left')) - 56) / 132); itemsrc = 'http:' + $('.item-container').prev().find('.thumb:eq(' + itemNum + ') img').attr('src'); } window.open('http://karmadecay.com/search?kdtoolver=m2&q=' + itemsrc); return false; } else { url = document.location.href; } if (document.location.href.match('reddit.com/r/')) { /* Anti-blocker bipassing */ url = url.replace(/\/r\/.*?\//, '/r/all/'); url = url.match(/.*?\/r\/all\/.*?\/.*?\//)[0]; } document.location = 'http://karmadecay.com/search?kdtoolver=m2&q=' + encodeURIComponent(url); })();